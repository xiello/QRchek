# Nixpacks configuration for Railway deployment
# This file tells Railway how to build and run your app

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = [
  "cd web && npm ci",
  "cd server && npm ci"
]

[phases.build]
cmds = [
  "cd web && npm run build",
  "mkdir -p server/public",
  "cp -r web/dist/* server/public/",
  "cd server && npm run build"
]

[start]
cmd = "sh -c 'cd server && npm start'"
